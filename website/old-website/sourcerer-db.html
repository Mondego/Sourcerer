<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<title>Sourcerer Project: Sourcerer-DB</title>
<link rel="stylesheet" href="css/sourcerer.css" type="text/css" />
</head>

<body>
<div id="container">
<div id="header">
<div id="a1"></div>
<div id="a2"></div>
<div id="a3"></div>
<div id="a4"></div>
<div id="a5"></div>
The Sourcerer Project
</div>
<div id="content">
<div id="main">
<h1>SourcererDB</h1>
<p>SourcererDB is a relational database containing entity/relationship models of
the projects from the Sourcerer Java Repository. These models are automatically
generated by the extractor tool and then imported into a MySQL database.</p>

<h2>Schema</h2>
<p>The SourcererDB schema is a direct manifestation of the metamodel used by the
extractor. At its core, the metamodel represents entities in the code (such as
classes, methods and fields) and the relations between these entities (such
as containment and invocation). In addition to the entities and relations,
SourcererDB contains tables for the projects, files and comments. Each
table will now be discussed in detail.</p>

<h3>Projects Table</h3>
<p>This table contains a listing of all the projects in the repository.</p>
<table cellspacing="0">
<tr>
  <th>Name</th>
  <th>Type</th>
  <th>Nullable?</th>
  <th>Indexed?</th>
  <th>Description</th>
</tr>
<tr class="bga">
  <td class="fixed bold">project_id</td>
  <td class="fixed">SERIAL</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>A unique id assigned by the database.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">project_type</td>
  <td class="fixed">ENUM(values)</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The type of the project.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">name</td>
  <td class="fixed">VARCHAR(1024)</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The name of the project in the originating repository.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">description</td>
  <td class="fixed">VARCHAR(4096)</td>
  <td class="cent">Yes</td>
  <td class="cent">No</td>
  <td>Optional project description.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">version</td>
  <td class="fixed">VARCHAR(1024)</td>
  <td class="cent">Yes</td>
  <td class="cent">No</td>
  <td>Project version number. Only used for MAVEN projects.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">groop</td>
  <td class="fixed">VARCHAR(1024)</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>Project's Maven group. Only used for MAVEN projects.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">path</td>
  <td class="fixed">VARCHAR(1024)</td>
  <td class="cent">Yes</td>
  <td class="cent">No</td>
  <td>The relative path of the project within the repository. Only used for JAVA_LIBRARY and CRAWLED projects.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">source</td>
  <td class="fixed">VARCHAR(1024)</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>The original source of the project.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">hash</td>
  <td class="fixed">VARCHAR(32)</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>The md5 hash of the project. Only used for JAR and MAVEN projects.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">has_source</td>
  <td class="fixed">BOOLEAN</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>Does the project have source code? Will be false for some jar files.</td>
</tr>
</table>
<p>There are five different type of projects represented in this table:</p>
<div class="list">
<h4 class="fixed">SYSTEM</h4>
<p>These are two special projects not corresponding directly to anything from the repository. 
The first system project contains the primitive types provided by the Java language. The second
system project contains all the unknown entities, which are the result of unresolved references.</p>
<h4 class="fixed">JAVA_LIBRARY</h4>
<p>These projects are the jar files included with distributions of Java. The largest is 
<span class="fixed">rt.jar</span>, which contains the classes most associate with the Java Standard Library</p>
<h4 class="fixed">CRAWLED</h4>
<p>These are the projects aggregated from online repositories.</p>
<h4 class="fixed">JAR</h4>
<p>Each unique jar file from the CRAWLED projects is considered a project in its own right.</p>
<h4 class="fixed">MAVEN</h4>
<p>Each MAVEN project is a jar file downloaded from the <a href="http://repo1.maven.org/maven2/">Maven2 Central Repository</a>.</p>
</div>
<h3>Files Table</h3>
<p>This table contains a listing of the files in the projects.</p>
<table cellspacing="0">
<tr>
<th>Name</th>
<th>Type</th>
<th>Nullable?</th>
<th>Indexed?</th>
<th>Description</th>
</tr>
<tr class="bga">
  <td class="fixed bold">file_id</td>
  <td class="fixed">SERIAL</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>A unique id assigned by the database.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">file_type</td>
  <td class="fixed">ENUM(valus)</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The type of the file.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">name</td>
  <td class="fixed">VARCHAR(1024)</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The name of the file.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">path</td>
  <td class="fixed">VARCHAR(1024)</td>
  <td class="cent">Yes</td>
  <td class="cent">No</td>
  <td>The relative path of the file within the project. Only used for SOURCE and CLASS files.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">hash</td>
  <td class="fixed">VARCHAR(32)</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>The md5 hash of the file. Only used for JAR files.</td>
<tr class="bgb">
  <td class="fixed bold">project_id</td>
  <td class="fixed">BIGINT UNSIGNED</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The id of the project containing this file.</td>
</tr>
</table>
<p>There are three types of files represented in this table:</p>
<div class="list">
<h4 class="fixed">SOURCE</h4>
<p>These are files for which there was source code. Any project type,
except SYSTEM, can contain SOURCE files.</p>
<h4 class="fixed">CLASS</h4>
<p>These are files for which there was only byte code. Any project type,
except SYSTEM and CRAWLED, can contain CLASS files. Any <span class="fixed">.class</span>
files from CRAWLED projects not packaged into a jar file are ignored by the extractor.
<h4 class="fixed">JAR</h4>
<p>These are the jar files contained within CRAWLED projects. To find the details
of what is inside each jar file, simply find the JAR project with the matching md5
hash. JAR files from different projects may be copies (and hence have the same 
md5 hash), while each JAR project is unique.</p>
</div>
<h3>Entities Table</h3>
<p>This table contains a listing of the entities extracted from the files.
<table cellspacing="0">
<tr>
<th>Name</th>
<th>Type</th>
<th>Nullable?</th>
<th>Indexed?</th>
<th>Description</th>
</tr>
<tr class="bga">
  <td class="fixed bold">entity_id</td>
  <td class="fixed">SERIAL</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>A unique id assigned by the database.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">entity_type</td>
  <td class="fixed">ENUM(values)</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The type of the entity.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">modifiers</td>
  <td class="fixed">SET(values)</td>
  <td class="cent">Yes</td>
  <td class="cent">No</td>
  <td>Java modifiers associated with the entity. Only valid for entity types that can have modifiers.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">fqn</td>
  <td class="fixed">VARCHAR(8192)</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>The fully-qualified name (FQN) of the entity.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">params</td>
  <td class="fixed">VARCHAR(8192)</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>The method parameters.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">raw_params</td>
  <td class="fixed">VARCHAR(8192)</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>The raw method parameters (after type erasure).</td>
</tr>
<tr class="bga">
  <td class="fixed bold">multi</td>
  <td class="fixed">INT UNSIGNED</td>
  <td class="cent">Yes</td>
  <td class="cent">No</td>
  <td>A multi-purpose column for storing additional information. Used by certain entity types.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">project_id</td>
  <td class="fixed">BIGINT UNSIGNED</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The id of the project that contains this entity.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">file_id</td>
  <td class="fixed">BIGINT UNSIGNED</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>The id of the file that contains this entity. Some entities are not associated with specific files.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">offset</td>
  <td class="fixed">INT UNSIGNED</td>
  <td class="cent">Yes</td>
  <td class="cent">No</td>
  <td>The offset to the start of the entity in its originating file.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">length</td>
  <td class="fixed">INT UNSIGNED</td>
  <td class="cent">Yes</td>
  <td class="cent">No</td>
  <td>The length of the entity in its originating file.</td>
</tr>
</table>
<p>There are twenty one different types of entities represented in this table. Each entity
type, unless otherwise specified, may have a location associated with it. If it has a 
location, then the file_id, offset and length will all be non-null. Any entity 
derived from a CLASS file will not have a location.</p>
<table cellspacing="0">
<tr>
<th>Type</th>
<th>Description</th>
</tr>
<tr class="bga">
<td class="fixed">PACKAGE</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/packages.html">package</a>. Has no location or modifiers.</td>
</tr>
<tr class="bgb">
<td class="fixed">CLASS</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/classes.html">class</a> declaration.</td>
</tr>
<tr class="bga">
<td class="fixed">INTERFACE</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/interfaces.html">interface</a> declaration.</td>
</tr>
<tr class="bgb">
<td class="fixed">ENUM</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.9">enum</a> declaration.</td>
</tr>
<tr class="bga">
<td class="fixed">ANNOTATION</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/interfaces.html#9.6">annotation</a> type declaration.</td>
</tr>
<tr class="bgb">
<td class="fixed">INITIALIZER</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.6">initializer</a> declaration, both instance and static.</td>
</tr>
<tr class="bga">
<td class="fixed">FIELD</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.3">field</a> declaration.</td>
</tr>
<tr class="bgb">
<td class="fixed">ENUM_CONSTANT</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.9">enum constant</a> declaration.</td>
</tr>
<tr class="bga">
<td class="fixed">CONSTRUCTOR</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.8">constructor</a> declaration.</td>
</tr>
<tr class="bgb">
<td class="fixed">METHOD</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.4">method</a> declaration.</td>
</tr>
<tr class="bga">
<td class="fixed">ANNOTATION_ELEMENT</td>
<td>A Java method <a href="http://java.sun.com/docs/books/jls/third_edition/html/interfaces.html#9.6">annotation type element</a> declaration.</td>
</tr>
<tr class="bgb">
<td class="fixed">PARAMETER</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.4.1">formal parameter</a> declaration.</td>
</tr>
<tr class="bga">
<td class="fixed">LOCAL_VARIABLE</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/statements.html#14.4">local variable</a> declaration. The FQN of a LOCAL_VARIABLE is just its name.</td>
</tr>
<tr class="bgb">
<td class="fixed">PRIMIVITE</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/typesValues.html#4.2">primitive type</a>. Only contained in the primitives SYSTEM project. Has no modifiers or location.</td>
</tr>
<tr class="bga">
<td class="fixed">ARRAY</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/arrays.html#10.1">array type</a>. Has no modifiers or location.</td>
</tr>
<tr class="bgb">
<td class="fixed">TYPE_VARIABLE</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/typesValues.html#4.4">type variable</a>. Has no modifiers or location.</td>
</tr>
<tr class="bga">
<td class="fixed">WILDCARD</td>
<td>A Java type <a href="http://java.sun.com/docs/books/jls/third_edition/html/typesValues.html#4.5.1">wildcard</a>. Has no modifiers or location.</td>
</tr>
<tr class="bgb">
<td class="fixed">PARAMETRIZED_TYPE</td>
<td>A Java <a href="http://java.sun.com/docs/books/jls/third_edition/html/typesValues.html#4.5">parametrized type</a>. Has no modifiers or location.</td>
</tr>
<tr class="bga">
  <td class="fixed">DUPLICATE</td>
  <td>An entity created when it is unclear exactly which type was referenced by a relation. Has no modifiers or location.</td>
</tr>
<tr class="bgb">
  <td class="fixed">VIRTUAL_DUPLICATE</td>
  <td>An entity created when it is unclear exactly which interface method was referenced by a virtual method call. Has no modifiers or location.</td>
</tr>
<tr class="bga">
  <td class="fixed">UNKNOWN</td>
  <td>An entity created when the type referenced by a relation is unknown. Has no modifiers or location.</td>
</tr>
</table>
<h3>Relations Table</h3>
<p>This table contains a listing of the relations extracted from the files and linking the entities.</p>
<table cellspacing="0">
<tr>
<th>Name</th>
<th>Type</th>
<th>Nullable?</th>
<th>Indexed?</th>
<th>Description</th>
</tr>
<tr class="bga">
  <td class="fixed bold">relation_id</td>
  <td class="fixed">SERIAL</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>A unique id assigned by the database.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">relation_type</td>
  <td class="fixed">ENUM(values)</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The type of the relation.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">relation_class</td>
  <td class="fixed">ENUM(values)</td>
  <td class="cent">No</td>
  <td class="cent">No</td>
  <td>The class of the relation.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">lhs_eid</td>
  <td class="fixed">BIGINT UNSIGNED</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The id of the source entity of the relation.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">rhs_eid</td>
  <td class="fixed">BIGINT UNSIGNED</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The id of the target entity of the relation.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">project_id</td>
  <td class="fixed">BIGINT UNSIGNED</td>
  <td class="cent">No</td>
  <td class="cent">Yes</td>
  <td>The id of the project containing the relation.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">file_id</td>
  <td class="fixed">BIGINT UNSIGNED</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>The id of the file containing the relation. Some relations are not associated with specific files.</td>
</tr>
<tr class="bgb">
  <td class="fixed bold">offset</td>
  <td class="fixed">INT UNSIGNED</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>The offset to the start of the relation in its originating file.</td>
</tr>
<tr class="bga">
  <td class="fixed bold">length</td>
  <td class="fixed">INT UNSIGNED</td>
  <td class="cent">Yes</td>
  <td class="cent">Yes</td>
  <td>The length of the relation in its originating file.</td>
</tr>
</table>
<p>There are twenty-two different types of relations represented in this table. Each
relation type, unless otherwise specified, may have a location associated with it. If it
has a location, then the file_id, offset and length will all be non-null. Any entity
derived from a CLASS file with not have a location.</p>
<table cellspacing="0">
<tr>
<th>Type</th>
<th>Description</th>
</tr>
<tr class="bga">
<td class="fixed">CONTAINS</td>
<td>Physical containment. For example, a CLASS CONTAINS a METHOD.</td>
</tr>
<tr class="bgb">
<td class="fixed">EXTENDS</td>
<td>Class extension. For example, a CLASS EXTENDS a CLASS.</td>
</tr>
<tr class="bga">
<td class="fixed">IMPLEMENTS</td>
<td>Interface implementation and extension. For example, a CLASS IMPLEMENTS an INTERFACE or an INTERFACE IMPLEMENTS an INTERFACE.</td>
</tr>
<tr class="bgb">
<td class="fixed">HOLDS</td>
<td>Type of a field. For example, a FIELD HOLDS a CLASS.</td>
</tr>
<tr class="bga">
<td class="fixed">RETURNS</td>
<td>The return type of a method. For example, a METHOD RETURNS a CLASS.</td>
</tr>
<tr class="bgb">
<td class="fixed">READS</td>
<td>A field being read. For example, a METHOD READS a FIELD.</td>
</tr>
<tr class="bga">
<td class="fixed">WRITES</td>
<td>A field being written. For example, a METHOD WRITES a FIELD.</td>
</tr>
<tr class="bgb">
<td class="fixed">CALLS</td>
<td>Method invocation. For example, a METHOD CALLS a METHOD.</td>
</tr>
<tr class="bga">
<td class="fixed">INSANTIATES</td>
<td>Constructor invocation. For example, a METHOD INSTANTIATES a CONSTRUCTOR.</td>
</tr>
<tr class="bgb">
<td class="fixed">THROWS</td>
<td>A throws clause. For example, a METHOD THROWS a CLASS.</td>
</tr>
<tr class="bga">
<td class="fixed">CASTS</td>
<td>A cast expression. For example, a METHOD CASTS a CLASS.</td>
</tr>
<tr class="bgb">
<td class="fixed">CHECKS</td>
<td>An instanceof expression. For example, a METHOD CHECKS a CLASS.</td>
</tr>
<tr class="bga">
<td class="fixed">ANNOTATED_BY</td>
<td>A type is annotated. For example, a METHOD is ANNOTATED_BY a CLASS.</td>
</tr>
<tr class="bgb">
<td class="fixed">USES</td>
<td>A type is referenced. For example, a METHOD USES a CLASS.</td>
</tr>
<tr class="bga">
<td class="fixed">HAS_ELEMENTS_OF</td>
<td>The element type of an array. For example, an ARRAY HAS_ELEMENTS_OF a CLASS.</td>
</tr>
<tr class="bgb">
<td class="fixed">PARAMETRIZED_BY</td>
<td>A type has type parameters. For example, a METHOD is PARAMETRIZED_BY a TYPE_VARIABLE.</td>
</tr>
<tr class="bga">
<td class="fixed">HAS_BASE_TYPE</td>
<td>The base type of a parametrized type. For example, a PARAMETRIZED_TYPE HAS_BASE_TYPE of a CLASS.</td>
</tr>
<tr class="bgb">
<td class="fixed">HAS_TYPE_ARGUMENT</td>
<td>A type parameter is bound to a specific type. For example, a PARAMETRIZED_TYPE HAS_TYPE_ARGUMENT of a CLASS.</td>
</tr>
<tr class="bga">
<td class="fixed">HAS_UPPER_BOUND</td>
<td>The upper bound of a wildcard. For example, a WILDCARD HAS_UPPER_BOUND of a CLASS.</td>
</tr>
<tr class="bgb">
<td class="fixed">HAS_LOWER_BOUND</td>
<td>The lower bound of a wildcard. For example, a WILDCARD HAS_LOWER_BOUND of a CLASS.</td>
</tr>
<tr class="bga">
<td class="fixed">OVERRIDES</td>
<td>A method overrides a method. For example, a METHOD OVERRIDES a METHOD.</td>
</tr>
<tr class="bgb">
<td class="fixed">MATCHES</td>
<td>A duplicate type matches a number of types. For example, a DUPLICATE MATCHES a CLASS.</td>
</tr>
</table>
<p>There are five different relation classes. A relation's class tries to capture
the relationship between the source and the target of the relation.</p>
<div class="list">
<h4 class="fixed">JAVA_LIBRARY</h4>
<p>The relation's target is an entity from a JAVA_LIBRARY project.</p>
<h4 class="fixed">INTERNAL</h4>
<p>The relation's target is an entity from the same project.</p>
<h4 class="fixed">EXTERNAL</h4>
<p>The relation's target is an entity in some external project.</p>
<h4 class="fixed">UNKNOWN</h4>
<p>It is unknown where the relation's target is.</p>
<h4 class="fixed">NOT_APPLICABLE</h4>
<p>It does not make sense to classify this relation type as internal or external.</p>
</div>
<h3>Comments Table</h3>
<p>This table contains a listing of the comments extracted from the files.</p>
<table cellspacing="0">
<tr>
<th>Name</th>
<th>Type</th>
<th>Nullable?</th>
<th>Indexed?</th>
<th>Description</th>
</tr>
<tr class="bga">
<td class="fixed bold">comment_id</td>
<td class="fixed">SERIAL</td>
<td class="cent">No</td>
<td class="cent">Yes</td>
<td>A uniqueid assigned by the database.</td>
</tr>
<tr class="bgb">
<td class="fixed bold">comment_type</td>
<td class="fixed">ENUM(values)</td>
<td class="cent">No</td>
<td class="cent">No</td>
<td>The type of the comment.</td>
</tr>
</table>
<h3>Problems Table</h3>
</div>
</div>
<div id="navbar">
  <div><a href="index.html">Overview</a></div>
  <div><a href="infrastructure.html">Core Infrastructure</a></div>
  <div><a href="repository.html">Repository</a></div>
  <div><a class="sel" href="sourcerer-db.html">SourcererDB</a></div>
  <div><a href="services.html">Services</a></div>
  <div><a href="code-search-engine.html">Code Search Engine</a></div>
  <!--<div><a href="code-genie.html">CodeGenie</a></div> -->
  <div><a href="tutorial.html">Tutorial</a></div>
  <div><a href="people.html">People</a></div>
  <div><a href="publications.html">Publications</a></div>
</div>
</div>
</body>
</html>
